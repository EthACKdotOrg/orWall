<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>orWall — The Onion Router Firewall</title>
    <meta name="application-name" content="orWall">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <meta name="description" content="orWall helps you keeping things private.">
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./bootstrap/css/bootstrap-theme.min.css">
    <style type="text/css">
      body { margin-top: 60px; }
      footer {
        width:100%;
        padding-top:10px;
        padding-bottom:10px;
        margin-top:20px;
        background-color: #f5f5f5;
        text-align:center;
      }
      .jumbotron {
        background-image:url('online-v2.png');
        background-repeat:no-repeat;
        background-position:10px 50%;
      }
      .jumbotron>div {
        padding-left:60px;
      }
      @media (max-width: 800px) {
        .jumbotron>div {
          padding-left:100px;
        }
      }
      .bs-callout {
        padding: 20px;
        margin: 20px 0px;
        border-width: 1px 1px 1px 5px;
        border-style: solid;
        border-color: #EEE;
        -moz-border-top-colors: none;
        -moz-border-right-colors: none;
        -moz-border-bottom-colors: none;
        -moz-border-left-colors: none;
        border-image: none;
        border-radius: 3px;
      }
      .bs-callout-warning {
        border-left-color: #F0AD4E;
      }
      .bs-callout-warning h4 {
        color: #F0AD4E;
      }
      .bs-callout h4 {
        margin-top: 0px;
        margin-bottom: 5px;
      }
      #qr_bitcoin, #qr_litecoin {
        display: none;
        position: absolute;
        z-index:10;
        margin-top:20px;
      }
      @media (min-width: 800px) {
        #release a {
          margin-top:40%;
        }
      }
      .thumbnail {
        height:470px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href=""><img src="head-logo.png" alt=""> Because real life is a Dystopia</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><a title="Hosted on Github" href="https://github.com/EthACKdotOrg/orWall"><img src="github.png" alt=""> Get sources</a></li>
          <li><a title="Hosted on Github" href="https://github.com/EthACKdotOrg/orWall/releases"><span class="glyphicon glyphicon-download"></span> Releases</a></li>
          <li><a title="Hosted on Github" href="https://github.com/EthACKdotOrg/orWall/issues?state=open"><span class="glyphicon glyphicon-exclamation-sign"></span> Issues</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li id="bitcoin"><a href="bitcoin:1Kriu9owRhEsFkj8Lc6Wr5xTv8YTNphhXn"><img src="bitcoin.png" alt="qr" id="qr_bitcoin">Bitcoin</a></li>
          <li id="litecoin"><a href="litecoin:LXjW5tKRHbrbxwTZmitj4JeBqcm4xpqvJ2"><img src="litecoin.png" alt="qr" id="qr_litecoin">Litecoin</a></li>
        </ul>
      </div>
    </div>
    </nav>

    <div class="container">
      <div class="row jumbotron">
        <div class="col-md-10">
          <h1>orWall</h1>
          <p>
          Put your apps behind <a href="https://guardianproject.info/apps/orbot/">Orbot</a>
          and block all unwanted traffic in one go.
          </p>
        </div>
        <div class="col-md-2">
          <a class="btn btn-primary btn-lg" href="https://f-droid.org/repository/browse/?fdid=org.ethack.orwall">On F-Droid</a>
          <div id="release">
            <a class="btn btn-primary btn-lg" href="https://github.com/EthACKdotOrg/orWall/releases">Get it now!</a>
          </div>
          <div id="sig">
          </div>
        </div>
      </div>
      <div>
        <h3>How does it work?</h3>
        <p>
        orWall will force selected applications through <a href="https://guardianproject.info/apps/orbot/">Orbot</a>
        while preventing unchecked applications to have network access.<br>
        In order to do so, it will call the iptables binary. This binary, present on your Android device, requires superuser access (aka root). It's
        the application that manages the firewall on Linux and, by extension, on Android.
        </p>
        <p>
        In short, orWall will add special iptables rules in order to redirect traffic for applications through Tor; it will also add required rules in
        order to block traffic for other apps.<br>
        The redirection is based on the application user id. Each android application runs as a dedicated user, and iptables has support for traffic
        filtering based on the process owner, meaning it's really easy and pretty safe to do this kind of thing on an Android device.
        </p>
        <div class="bs-callout bs-callout-warning">
          <h4>Limitations</h4>
          <p>
          This application takes care of IP connections only, not GSM. It won't protect you if an attacker sends commands to your baseband through SMS, for
          example.
          </p>
          <p>
          Also, on some Android versions (at least 4.1.1), the init-script will not work, meaning you may have outgoing connections before orWall starts.
          </p>
        </div>
        <p>
        The application works in two stages: first, an init-script will block all incoming and outgoing traffic. This should prevent leaks, knowing Android sends
        stuff before you can even access the device.<br>
        Second stage comes once the device is fully booted: orWall itself takes the lead on the firewall, and add required rules in order to allow Orbot traffic, and
        redirect selected application to Orbot TransPort.
        </p>
        <p>
        Basically, orWall is a simple UI for scripts provided by <a href="https://blog.torproject.org/blogs/mikeperry">Mike Perry</a> in
        <a href="https://blog.torproject.org/blog/mission-impossible-hardening-android-security-and-privacy">his blog post on torproject</a>.
      </div>
      <div class="row">
        <div class="col-md-6">
          <h3>What orWall is</h3>
          <ul>
            <li>A firewall configurator: it allows you to set up your device in order to force apps through <a href="https://guardianproject.info/apps/orbot/">Orbot</a>.</li>
            <li>A way to prevent unwanted network access: only the apps you select access the Net through <a href="https://guardianproject.info/apps/orbot/">Orbot</a>.</li>
            <li>An app you should use with caution: if you don't understand what it's doing, you may have some bad surprises.</li>
          </ul>
        </div>
        <div class="col-md-6">
          <h3>What orWall isn't</h3>
          <ul>
            <li>A replacement for Orbot: you still need Orbot on your device.</li>
            <li>A replacement for AFWall/DroidWall – <span class="bg-danger">but it may lead to weird problems if you're using both</span>.</li>
            <li>The Answer to the Ultimate Question of Life, the Universe and Everything: everybody knows it's 42.</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h3>Prerequistes</h3>
          <ul>
            <li>Root access</li>
            <li><a href="https://guardianproject.info/apps/orbot/">Orbot</a></li>
          </ul>
          <div class="bs-callout bs-callout-warning">
            <h4> Warning! <small>As we're still in alpha, the following stuff may be useful:</small></h4>
            <ul>
              <li>A computer;</li>
              <li>USB cable in order to connect your device to the computer;</li>
              <li>Android SDK and, espcially, Android Debug Bridge (ADB);</li>
              <li>Some knowledge about shell commands (iptables, mostly);</li>
              <li>A towel.</li>
            </ul>
          </div>
        </div>
        <div class="col-md-6">
          <h3>How to use orWall</h3>
          <ul class="list-unstyled">
            <li>Ensure you have <span class="text-danger">Root access</span> on your device.</li>
            <li>Ensure you don't have AFWall or other firewall manager installed, or at least deactivate them</li>
            <li>Ensure you have <span class="text-danger"><a href="https://guardianproject.info/apps/orbot/">Orbot</a> installed</span>.</li>
            <li>Ensure Orbot has <span class="text-danger">no Transparent Proxy enabled</span>, like on the screenshot.</li>
            <li>Start orWall , select the apps you want to redirect to Orbot.</li>
            <li>Reboot.</li>
            <li>Enjoy more privacy!</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h3>Troubleshooting</h3>
          <ul class="list-unistyled">
            <li><strong>No network anymore:</strong> Did you start Orbot? Did you select applications? Do you have network (i.e. wireless, 3G and so on)?</li>
            <li><strong>No network anymore (bis):</strong> <span class="text-danger">Ensure you don't have Transparent Proxy enabled in Orbot</span>.</li>
            <li><strong>No network anymore (tris):</strong> Is Orbot connected to the Tor Network?</li>
            <li><strong>My apps aren't going through Tor:</strong> Are you using some other firewall application, like AFWall or DroidWall? If so, please remove it, reboot, and test again.</li>
            <li><strong>Application crashes with no message:</strong> Please fire up ADB logcat and <a href="https://github.com/EthACKdotOrg/orWall/issues?state=open">fill in a new issue</a>. :)</li>
            <li><strong>Some menu entries are disabled:</strong> Did you activate those options in the settings? Did you select Browser app and/or SIP app in the settings?</li>
          </ul>
        </div>
        <div class="col-md-6">
          <h3>How to uninstall orWall</h3>
          <ul>
            <li>Remove the init-script (from the settings)</li>
            <li>Uninstall the app as usual.</li>
            <li>Reboot.</li>
          </ul>
          <p>We cannot catch the uninstall event in order to make things, meaning you have to remove the init-script by hand.</p>
          <p>In case the init-script is still present, you can remove it from the shell (ADB or any root-supporting Terminal application):</p>
<pre>su
mount -o remount,rw /system
rm -f /system/etc/init.d/91firewall
mount -o remount,ro /system
reboot</pre>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h3>How to request support?</h3>
          Please <a href="https://github.com/EthACKdotOrg/orWall/issues?state=open">open an issue</a> with the following information:
          <ul>
            <li>Device model;</li>
            <li>Android version;</li>
            <li>orWall version;</li>
            <li>Steps to reproduce the problem;</li>
            <li>LogCat output;</li>
            <li>screenshots (if possible);</li>
            <li>Output of <code>iptables -vnL</code> and <code>iptables -vnL -t nat</code>;</li>
          </ul>
          Yes, that's a lot of things, but we do not possess a crystal ball allowing us to guess your problem…
        </div>
        <div class="col-md-6">
          <h3>I want to take part!</h3>
          <p>
          Great news, thanks! Just <a href="https://github.com/EthACKdotOrg/orWall/fork">create a fork</a> and submit pull-requests.
          We're opened for new features, bug corrections and so on, feel free to help.
          </p>
          <p>
          We're seeking people for translations, bug swatting, read proofing.<br>
          We're also wanting to add the following features to orWall:
          </p>
          <ul>
            <li>Action: when we deselect an app in orWall, it should be restarted in order to ensure network is cut.</li>
            <li>Action: panic button: allow user to cut all connections in one shot (though it's possible to do so by cutting Orbot).</li>
            <li>When we remove an application, it should be removed from orWall authorization list in order to prevent UID overlaps.</li>
          </ul>
        </div>
      </div>
      <h3>Screenshots</h3>
      <div class="row">
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/orbot-configuration.png"><img src="screenshots/mini-orbot-configuration.png" alt="orbot-config"></a>
            <div class="caption">
              <h4>Orbot configuration</h4>
              <p>Please ensure you don't use Orbot Transparent Proxy feature. At all.</p>
              <p><a class="btn btn-default" role="button" href="screenshots/orbot-configuration.png">Zoom</a>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/app-list-full.png"><img src="screenshots/mini-app-list-full.png" alt=""></a>
            <div class="caption">
              <h4>Application list</h4>
              <p>You see only application requesting Network rights.<br>
              Red applications are System.</p>
              <p><a class="btn btn-default" role="button" href="screenshots/app-list-full.png">Zoom</a>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/manage-init-script.png"><img src="screenshots/mini-manage-init-script.png" alt=""></a>
            <div class="caption">
              <h4>Manage init-script</h4>
              <p>Enforce, remove or don't manage init-script</p>
              <p><a class="btn btn-default" role="button" href="screenshots/manage-init-script.png">Zoom</a>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/search-app.png"><img src="screenshots/mini-search-app.png" alt=""></a>
            <div class="caption">
              <h4>Search your application</h4>
              <p>Have a lot of applications? No problem, you can search by name</p>
              <p><a class="btn btn-default" role="button" href="screenshots/search-app.png">Zoom</a>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/settings.png"><img src="screenshots/mini-settings.png" alt=""></a>
            <div class="caption">
              <h4>Settings are documented</h4>
              <p>Want to try some new stuff? Just read the settings summary in order to know what they do</p>
              <p><a class="btn btn-default" role="button" href="screenshots/settings.png">Zoom</a>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="thumbnail">
            <a href="screenshots/menu.png"><img src="screenshots/mini-menu.png" alt=""></a>
            <div class="caption">
              <h4>Convenient menu</h4>
              <p>The menu let you access quick function in a convenient way. Activate stuff in settings, access new features in menu</p>
              <p><a class="btn btn-default" role="button" href="screenshots/menu.png">Zoom</a>
            </div>
          </div>
        </div>
      </div>
      <div id="latest_commits"></div>
      <div class="row">
        <div class="col-md-12">
          <h3>They speak about orWall</h3>
          <ul>
            <li><a href="http://www.numerama.com/magazine/30153-orwall-une-app-android-qui-utilise-tor-et-bloque-le-trafic-en-dehors.html">Numerama — 30.07.2014</a></li>
            <li><a href="https://twitter.com/guardianproject/status/493927005378064384">The Guardian Project — 28.07.2014</a></li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>What about the previous name, Torrific?</h3>
          <p>
          There's a <a href="https://www.torproject.org/docs/trademark-faq.html.en">trademark on "Tor"</a>, and it seems Tor Project wants to enforce it.
          <strong>Kindly</strong>, that said (and I emphasize this fact). So, in order to both respect the trademark and avoid useless discussions, I prefered to change the name to something else.
          <a href="https://lists.torproject.org/pipermail/tor-talk/2014-July/034110.html">All is fine now :)</a>.<br>
          Long live orWall, your new Onion Router Firewall!
          </p>
        </div>
      </div>
    </div>
    <footer>
    Provided by <a href="https://www.ethack.org/"><img src="ethack.png" alt="">EthACK, the Swiss Privacy Basecamp</a>.
    This application is available under <a href="https://github.com/EthACKdotOrg/orWall/blob/master/LICENSE">GPLv3</a>.<br>
    The logo is released under <a href="http://creativecommons.org/licenses/by-sa/4.0/">cc-by-sa 4.0</a>.<br>
    Releases on Github are signed with GPG key <a href="http://pgp.mit.edu/pks/lookup?op=get&search=0xC12DF4DA85457DDB">608B 7DD8 D7F2 34E0 8C22  0313 C12D F4DA 8545 7DDB</a>
    </footer>
    <script type="text/javascript" src="jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $('#bitcoin').hover(function() {
        $('#qr_bitcoin').show();
      }, function() {
        $('#qr_bitcoin').hide();
      });
      $('#litecoin').hover(function() {
        $('#qr_litecoin').show();
      }, function() {
        $('#qr_litecoin').hide();
      });
      $.getJSON('https://api.github.com/repos/EthACKdotOrg/orWall/releases', function(data) {
          latest_release = data[0];
          url_apk = latest_release['assets'][0]['url']
          url_sig = latest_release['assets'][1]['url']
          $.getJSON(url_apk, function(apk, links) {
            $('#release').html('<a class="btn btn-primary btn-lg" href="'+apk['browser_download_url']+'">Get '+latest_release['name']+'</a>');
          });
          $.getJSON(url_sig, function(sig, links) {
            $('#sig').html('<a href="'+sig['browser_download_url']+'">gpg signature</a>');
          });
          });
      $('#latest_commits').append('<h3>Latest commits</h3>');
      $.getJSON('https://api.github.com/repos/EthACKdotOrg/orWall/commits', function(commits) {
          $.each(commits, function(i) {
            commit = commits[i];
            content  = '<div class="row">';
            content += '<div class="col-md-2"><a href="'+commit['html_url']+'">'+commit['commit']['author']['date']+'</a></div>';
            content += '<div class="col-md-2">'+commit['commit']['author']['name']+'</div>';
            content += '<div class="col-md-8">'+commit['commit']['message']+'</div>';
            content += '</div>';

            $('#latest_commits').append(content);
          });
      });
    </script>
  </body>
</html>
